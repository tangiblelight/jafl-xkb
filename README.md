# jafl-xkb ğ‘–ğ‘±ğ‘ğ‘¾ğ‘¯ ğ‘®ğ‘°ğ‘›ğ‘¥ğ‘¦

ğ‘ğ‘¦ğ‘• ğ‘¦ğ‘• ğ‘© ğ‘ğ‘¹ğ‘‘ ğ‘ [@ğ‘–ğ‘±ğ‘ğ‘¾ğ‘¯-ğ‘¦ğ‘¯ğ‘“ğ‘´](https://github.com/Shavian-info)'ğ‘Ÿ [ğ‘¦ğ‘’ğ‘•ğ‘ğ‘§ğ‘®ğ‘¦ğ‘¥ğ‘§ğ‘¯ğ‘‘ğ‘©ğ‘¤ "JAFL" ğ‘¤ğ‘±ğ‘¬ğ‘‘](https://discord.com/channels/270907769257721856/270913515777163265/1203296681878360075), ğ‘©ğ‘¤ğ‘ªğ‘™ ğ‘¢ğ‘¦ğ‘ ğ‘© ğ‘ğ‘ºğ‘¾ğ‘¯ğ‘‘ ğ‘¿ğ‘Ÿğ‘¦ğ‘™ ğ‘ Dvorak ğ‘ğ‘³ğ‘™ğ‘’ğ‘—ğ‘«ğ‘±ğ‘–ğ‘©ğ‘¯ ğ‘•ğ‘’ğ‘°ğ‘¥. ğ‘” ğ‘ğ‘³ğ‘™ğ‘›ğ‘—ğ‘«ğ‘±ğ‘–ğ‘©ğ‘¯ ğ‘’ğ‘°ğ‘Ÿ ğ‘¸ ğ‘•ğ‘¢ğ‘ªğ‘ğ‘‘ ğ‘¢ ğ‘ğ‘º ğ‘’ğ‘¹ğ‘©ğ‘•ğ‘ğ‘ªğ‘¯ğ‘›ğ‘¦ğ‘™ ğ‘•ğ‘¦ğ‘¥ğ‘šğ‘©ğ‘¤ ğ‘¦ğ‘¯ ğ‘ ğ‘³ğ‘ğ‘¼ ğ‘¤ğ‘±ğ‘¬ğ‘‘.

### Qwerty-ğ‘•ğ‘‘ğ‘±ğ‘©ğ‘¤ ğ‘ğ‘³ğ‘™ğ‘’ğ‘—ğ‘«ğ‘±ğ‘–ğ‘©ğ‘¯

![JAFL Qwerty ğ‘¤ğ‘±ğ‘¬ğ‘‘](./img/jafl-qwerty.png)

### Dvorak-ğ‘•ğ‘‘ğ‘±ğ‘©ğ‘¤ ğ‘ğ‘³ğ‘™ğ‘’ğ‘—ğ‘«ğ‘±ğ‘–ğ‘©ğ‘¯

![JAFL Dvorak ğ‘¤ğ‘±ğ‘¬ğ‘‘](./img/jafl-dvorak.png)

### ğ‘’ğ‘©ğ‘¥ğ‘ğ‘´ğ‘Ÿ ğ‘•ğ‘°ğ‘’ğ‘¢ğ‘©ğ‘¯ğ‘•ğ‘©ğ‘Ÿ

MacOS JAFL ğ‘¿ğ‘Ÿğ‘©ğ‘Ÿ ğ‘›ğ‘§ğ‘›-ğ‘’ğ‘°ğ‘Ÿ ğ‘‘ ğ‘ğ‘®ğ‘©ğ‘›ğ‘µğ‘• ğ‘¤ğ‘¦ğ‘œğ‘©ğ‘—ğ‘¼ğ‘Ÿ, ğ‘•ğ‘´ ğ‘‘ğ‘±ğ‘ğ‘¦ğ‘™ `ğ‘© ğ‘®` ğ‘¬ğ‘‘ğ‘ğ‘«ğ‘‘ğ‘• `ğ‘¼`. ğ‘£ğ‘¬ğ‘§ğ‘ğ‘¼ ğ‘ğ‘¦ğ‘• ğ‘¦ğ‘• ğ‘¯ğ‘ªğ‘‘ ğ‘ğ‘ªğ‘•ğ‘¦ğ‘šğ‘©ğ‘¤ ğ‘¦ğ‘¯ XKB; ğ‘¢ğ‘³ğ‘¯ ğ‘’ğ‘«ğ‘› ğ‘¥ğ‘±ğ‘’ `ğ‘©` ğ‘© ğ‘›ğ‘§ğ‘›-ğ‘’ğ‘°, ğ‘šğ‘³ğ‘‘ ğ‘ğ‘§ğ‘¯ ğ‘¦ğ‘‘ ğ‘¢ğ‘«ğ‘› ğ‘¯ğ‘´ğ‘‘ ğ‘š ğ‘ğ‘ªğ‘•ğ‘¦ğ‘šğ‘©ğ‘¤ ğ‘‘ ğ‘¬ğ‘‘ğ‘ğ‘«ğ‘‘ `ğ‘©` ğ‘›ğ‘¼ğ‘§ğ‘’ğ‘‘ğ‘¤ğ‘¦ ğ‘¢ğ‘¦ğ‘ğ‘¬ğ‘‘ ğ‘© ğ‘’ğ‘° ğ‘’ğ‘ªğ‘¥ğ‘šğ‘¦ğ‘¯ğ‘±ğ‘–ğ‘©ğ‘¯ ğ‘¤ğ‘²ğ‘’ `ğ‘© ğ‘©`. ğ‘ğ‘ºğ‘¦ ğ‘’ğ‘³ğ‘¥ğ‘šğ‘¼ğ‘•ğ‘©ğ‘¥! ğ‘¦ğ‘¯ğ‘•ğ‘‘ğ‘§ğ‘‘, jafl-xkb ğ‘¿ğ‘Ÿğ‘©ğ‘Ÿ ğ‘’ğ‘ªğ‘¥ğ‘ğ‘´ğ‘Ÿ ğ‘•ğ‘°ğ‘’ğ‘¢ğ‘©ğ‘¯ğ‘•ğ‘©ğ‘Ÿ ğ‘“ ğ‘¤ğ‘¦ğ‘œğ‘©ğ‘—ğ‘¼ğ‘Ÿ ğ‘¯ ğ‘¦ğ‘’ğ‘•ğ‘‘ğ‘§ğ‘¯ğ‘›ğ‘©ğ‘› ğ‘–ğ‘±ğ‘ğ‘¾ğ‘¯ ğ‘’ğ‘ºğ‘©ğ‘’ğ‘‘ğ‘¼ğ‘Ÿ. ğ‘ğ‘¦ğ‘• ğ‘®ğ‘¦ğ‘’ğ‘¢ğ‘²ğ‘¼ğ‘Ÿ ğ‘šğ‘²ğ‘¯ğ‘›ğ‘¦ğ‘™ ğ‘© ğ‘¥ğ‘ªğ‘šğ‘ğ‘´ğ‘Ÿ ğ‘’ğ‘°: ğ‘•ğ‘° ğ‘—ğ‘¶ğ‘•ğ‘©ğ‘Ÿ ğ‘¦ğ‘¯ ğ‘ "Position of Compose key" ğ‘•ğ‘§ğ‘’ğ‘—ğ‘©ğ‘¯ ğ‘ ğ‘˜ğ‘¹ ğ‘’ğ‘°ğ‘šğ‘¹ğ‘› ğ‘¤ğ‘±ğ‘¬ğ‘‘ ğ‘ªğ‘ğ‘–ğ‘©ğ‘¯ğ‘Ÿ (ğ‘¹ ğ‘¦ğ‘¯ ğ‘ "Compose Key" ğ‘•ğ‘§ğ‘’ğ‘–ğ‘©ğ‘¯ ğ‘ `/usr/share/X11/xkb/rules/evdev.lst` ğ‘“ ğ‘’ğ‘©ğ‘¥ğ‘¨ğ‘¯ğ‘›-ğ‘¤ğ‘²ğ‘¯ ğ‘¸ğ‘œğ‘Ÿ). ğ‘ ğ‘¤ğ‘±ğ‘¬ğ‘‘ ğ‘¦ğ‘¥ğ‘©ğ‘¡ğ‘©ğ‘Ÿ ğ‘¿ğ‘Ÿ ğ‘®ğ‘²ğ‘‘ ğ‘ªğ‘¤ğ‘‘ ğ‘¨ğ‘Ÿ ğ‘’ğ‘©ğ‘¥ğ‘ğ‘´ğ‘Ÿ, ğ‘•ğ‘§ğ‘‘ ğ‘ğ‘¾ `setxkbmap -option compose:ralt`. ğ‘‘ ğ‘¬ğ‘‘ğ‘ğ‘«ğ‘‘ ğ‘© ğ‘¤ğ‘¦ğ‘œğ‘©ğ‘—ğ‘¼, ğ‘ğ‘®ğ‘§ğ‘• ğ‘ ğ‘’ğ‘©ğ‘¥ğ‘ğ‘´ğ‘Ÿ ğ‘’ğ‘° ğ‘“ğ‘ªğ‘¤ğ‘´ğ‘‘ ğ‘šğ‘² ğ‘ ğ‘’ğ‘° ğ‘•ğ‘°ğ‘’ğ‘¢ğ‘§ğ‘¯ğ‘• ğ‘“ ğ‘ğ‘¨ğ‘‘ ğ‘•ğ‘¦ğ‘¥ğ‘šğ‘©ğ‘¤. ğ‘“ ğ‘¦ğ‘œğ‘Ÿğ‘¨ğ‘¥ğ‘ğ‘©ğ‘¤ `<ğ‘’ğ‘©ğ‘¥ğ‘ğ‘´ğ‘Ÿ> ğ‘© ğ‘®` ğ‘¬ğ‘‘ğ‘ğ‘«ğ‘‘ğ‘• `ğ‘¼`; `<ğ‘’ğ‘©ğ‘¥ğ‘ğ‘´ğ‘Ÿ> ğ‘˜ ğ‘µ` ğ‘¬ğ‘‘ğ‘ğ‘«ğ‘‘ğ‘• `ğ‘¿`.

ğ‘ ğ‘¦ğ‘’ğ‘•ğ‘‘ğ‘§ğ‘¯ğ‘›ğ‘©ğ‘› ğ‘–ğ‘±ğ‘ğ‘¾ğ‘¯ ğ‘’ğ‘ºğ‘©ğ‘’ğ‘‘ğ‘¼ğ‘Ÿ ğ‘®ğ‘¦ğ‘’ğ‘¢ğ‘²ğ‘¼ ğ‘© ğ‘“ğ‘ªğ‘¯ğ‘‘ ğ‘ğ‘¨ğ‘‘ ğ‘•ğ‘³ğ‘ğ‘¹ğ‘‘ğ‘• ğ‘ğ‘±ğ‘¥ ğ‘ğ‘¾ "Unicode Variaton Selector 1"; ğ‘ ğ‘¦ğ‘œğ‘Ÿğ‘¨ğ‘¯ğ‘ğ‘©ğ‘¤ [Inter Alia](https://github.com/Shavian-info/interalia?tab=readme-ov-file#extended-shavian-letters).

ğ‘–ğ‘¦ğ‘“ğ‘‘-ğ‘¤ğ‘±ğ‘¼ ğ‘ğ‘³ğ‘™ğ‘’ğ‘—ğ‘«ğ‘±ğ‘–ğ‘©ğ‘¯ ğ‘¦ğ‘¯ MacOS JAFL (ğ‘¦ğ‘œğ‘Ÿ `_`, `â€¹`, `Â·`, ğ‘¯ğ‘¯ğ‘¯) ğ‘¦ğ‘Ÿ ğ‘¤ğ‘¦ğ‘¥ğ‘µğ‘ğ‘› ğ‘£ğ‘½ ğ‘¦ğ‘¯ ğ‘“ğ‘±ğ‘ğ‘¼ ğ‘ ğ‘’ğ‘©ğ‘¥ğ‘ğ‘´ğ‘Ÿ ğ‘•ğ‘°ğ‘’ğ‘¢ğ‘§ğ‘¯ğ‘•ğ‘©ğ‘Ÿ ğ‘¹ ğ‘•ğ‘‘ğ‘¨ğ‘¯ğ‘›ğ‘¼ğ‘› Qwerty/Dvorak ğ‘ğ‘³ğ‘™ğ‘’ğ‘—ğ‘«ğ‘±ğ‘–ğ‘©ğ‘¯.

![JAFL Compose Sequences](./img/jafl-compose.png)

## ğ‘¦ğ‘¯ğ‘•ğ‘‘ğ‘©ğ‘¤ğ‘±ğ‘–ğ‘©ğ‘¯

ğ‘ğ‘¤ğ‘±ğ‘• ğ‘ ğ‘“ğ‘±ğ‘©ğ‘¤ `shaw` ğ‘¦ğ‘¯ ğ‘ XKB ğ‘•ğ‘¦ğ‘¯ğ‘šğ‘©ğ‘¤ğ‘• ğ‘‘ğ‘¼ğ‘§ğ‘’ğ‘‘ğ‘¼ğ‘¦ - ğ‘¤ğ‘²ğ‘’ğ‘¤ğ‘¦ `/usr/share/X11/xkb/symbols/shaw`. ğ‘ğ‘¦ğ‘• ğ‘©ğ‘¤ğ‘¬ğ‘Ÿ ğ‘¿ ğ‘‘ ğ‘•ğ‘¢ğ‘¦ğ‘— ğ‘‘ ğ‘ ğ‘’ğ‘°ğ‘šğ‘¹ğ‘› ğ‘¤ğ‘±ğ‘¬ğ‘‘ ğ‘¢ ğ‘ ğ‘’ğ‘©ğ‘¥ğ‘¨ğ‘¯ğ‘› ğ‘®ğ‘²ğ‘¯: `setxkbmap shaw -option compose:ralt` ğ‘¹ `setxkbmap shaw -option compose:ralt`.

ğ‘ğ‘¤ğ‘±ğ‘• ğ‘ ğ‘“ğ‘±ğ‘©ğ‘¤ `.XCompose` ğ‘¦ğ‘¯ ğ‘˜ğ‘¹ ğ‘£ğ‘´ğ‘¯ ğ‘‘ğ‘¼ğ‘§ğ‘’ğ‘‘ğ‘¼ğ‘¦ - `~/.XCompose` - ğ‘¹ ğ‘’ğ‘ªğ‘ğ‘¦ ğ‘¦ğ‘‘ğ‘• ğ‘’ğ‘ªğ‘¯ğ‘‘ğ‘§ğ‘¯ğ‘‘ğ‘• ğ‘¦ğ‘“ ğ‘ ğ‘“ğ‘±ğ‘©ğ‘¤ ğ‘·ğ‘¤ğ‘®ğ‘§ğ‘›ğ‘¦ ğ‘¦ğ‘œğ‘Ÿğ‘¦ğ‘•ğ‘‘ğ‘•. ğ‘ğ‘¦ğ‘• ğ‘©ğ‘¤ğ‘¬ğ‘Ÿ ğ‘ ğ‘’ğ‘©ğ‘¯ğ‘ğ‘´ğ‘Ÿ ğ‘•ğ‘°ğ‘’ğ‘¢ğ‘©ğ‘¯ğ‘•ğ‘©ğ‘Ÿ ğ‘‘ ğ‘“ğ‘³ğ‘™ğ‘’ğ‘—ğ‘©ğ‘¯.

ğ‘’ğ‘ªğ‘ğ‘¦ ğ‘ ğ‘’ğ‘ªğ‘¯ğ‘‘ğ‘§ğ‘¯ğ‘‘ğ‘• ğ‘ `add-to-evdev.xml` ğ‘‘ ğ‘ XKB evdev ğ‘®ğ‘µğ‘¤ğ‘Ÿ - ğ‘¤ğ‘²ğ‘’ğ‘¤ğ‘¦ `/usr/share/X11/xkb/rules/evdev.xml` - ğ‘¡ğ‘³ğ‘•ğ‘‘ ğ‘šğ‘¦ğ‘“ğ‘¹ ğ‘ ğ‘¤ğ‘²ğ‘¯ ğ‘’ğ‘©ğ‘¯ğ‘‘ğ‘±ğ‘¯ğ‘¦ğ‘™ `</layoutList>`. ğ‘ğ‘¦ğ‘• ğ‘©ğ‘¤ğ‘¬ğ‘Ÿ ğ‘¢ğ‘¹ ğ‘›ğ‘§ğ‘•ğ‘’ğ‘‘ğ‘ªğ‘ ğ‘¦ğ‘¯ğ‘ğ‘²ğ‘®ğ‘©ğ‘¯ğ‘¥ğ‘©ğ‘¯ğ‘‘'ğ‘• â¸°ğ‘œğ‘¿ğ‘¦ ğ‘’ğ‘°ğ‘ğ‘¹ğ‘› ğ‘’ğ‘©ğ‘¯ğ‘ğ‘¦ğ‘œğ‘˜ğ‘¼ğ‘±ğ‘‘ğ‘¼ ğ‘‘ ğ‘¤ğ‘´ğ‘’ğ‘±ğ‘‘ ğ‘ ğ‘–ğ‘±ğ‘ğ‘¾ğ‘¯ ğ‘¤ğ‘±ğ‘¬ğ‘‘ğ‘•. ğ‘¦ğ‘“ ğ‘¿ ğ‘´ğ‘¯ğ‘¤ğ‘¦ ğ‘¿ğ‘Ÿ `setxkbmap` ğ‘ğ‘¦ğ‘• ğ‘•ğ‘‘ğ‘§ğ‘ ğ‘¦ğ‘Ÿ ğ‘¯ğ‘ªğ‘‘ ğ‘•ğ‘‘ğ‘®ğ‘¦ğ‘’ğ‘‘ğ‘¤ğ‘¦ ğ‘¯ğ‘§ğ‘•ğ‘©ğ‘•ğ‘ºğ‘¦.

ğ‘¤ğ‘ªğ‘œ ğ‘±ğ‘‘. ğ‘®ğ‘³ğ‘¯ğ‘¦ğ‘™ ğ‘ğ‘®ğ‘ªğ‘•ğ‘§ğ‘•ğ‘©ğ‘Ÿ ğ‘¢ğ‘¦ğ‘¤ ğ‘¯ğ‘ªğ‘‘ ğ‘®ğ‘§ğ‘’ğ‘©ğ‘œğ‘¯ğ‘²ğ‘Ÿ ğ‘ ğ‘¯ğ‘¿ ğ‘’ğ‘©ğ‘¥ğ‘ğ‘´ğ‘Ÿ ğ‘•ğ‘°ğ‘’ğ‘¢ğ‘©ğ‘¯ğ‘•ğ‘©ğ‘Ÿ ğ‘³ğ‘ğ‘¼ğ‘¢ğ‘²ğ‘Ÿ.

## ğ‘¤ğ‘»ğ‘¯ğ‘¦ğ‘™

ğ‘‘ğ‘¦ğ‘: ğ‘¿ğ‘Ÿ `feh` ğ‘‘ ğ‘´ğ‘ğ‘©ğ‘¯ ğ‘ ğ‘¤ğ‘±ğ‘¬ğ‘‘ ğ‘¦ğ‘¥ğ‘©ğ‘¡ ğ‘¦ğ‘¯ ğ‘© ğ‘•ğ‘¥ğ‘·ğ‘¤ ğ‘¢ğ‘¦ğ‘¯ğ‘›ğ‘´ ğ‘ğ‘¨ğ‘‘ ğ‘¿ ğ‘’ğ‘¨ğ‘¯ ğ‘’ğ‘°ğ‘ ğ‘ªğ‘¯-ğ‘•ğ‘’ğ‘®ğ‘°ğ‘¯ ğ‘¢ğ‘²ğ‘¤ ğ‘¤ğ‘»ğ‘¯ğ‘¦ğ‘™ ğ‘ğ‘¦ğ‘• (ğ‘¹ ğ‘§ğ‘¯ğ‘¦ ğ‘³ğ‘ğ‘¼) ğ‘’ğ‘¦ğ‘ğ‘¹ ğ‘¤ğ‘±ğ‘¬ğ‘‘. ğ‘¦ğ‘œğ‘Ÿ `feh -x. img/jafl-qwerty.png`

# jafl-xkb Latin README

This is an XKB port of [@Shavian-info](https://github.com/Shavian-info)'s [experimental "JAFL" layout](https://discord.com/channels/270907769257721856/270913515777163265/1203296681878360075), along with a variant using the Dvorak punctuation scheme. The punctuation keys are swapped with their corresponding symbol in the other layout.

### Qwerty-style punctuation

![JAFL Qwerty Layout](./img/jafl-qwerty.png)

### Dvorak-style punctuation

![JAFL Dvorak Layout](./img/jafl-dvorak.png)

### Compose Sequences

MacOS JAFL uses dead-keys to produce ligatures, so typing `ğ‘© ğ‘®` outputs `ğ‘¼`. However this is not possible in XKB; one could make `ğ‘©` a dead-key, but then it would not be possible to output `ğ‘©` directly without a key combination like `ğ‘© ğ‘©`. Very cumbersome! Instead, jafl-xkb uses compose sequences for ligutures and extended Shavian characters. This requires binding a compose key: see choices in the "Position of Compose key" section of your keyboard layout options (or in the "Compose Key" section of `/usr/share/X11/xkb/rules/evdev.lst` for CLI args). The layout images below use Right Alt as compose, set via `setxkbmap -option compose:ralt`. To output a ligature, press the Compose key followed by the key sequence for that symbol. For example `<Compose> ğ‘© ğ‘®` outputs `ğ‘¼`; `<Compose> ğ‘˜ ğ‘µ` outputs `ğ‘¿`.

The extended shavian characters require a font that supports them via Unicode Variation Selector 1; for example [Inter Alia](https://github.com/Shavian-info/interalia?tab=readme-ov-file#extended-shavian-letters).

Shift-layer punctuation in MacOS JAFL (eg. `_`, `â€¹`, `Â·`, etc.) is removed here in favor of compose sequences or standard Qwerty/Dvorak punctuation.

![JAFL Compose Sequences](./img/jafl-compose.png)

## Installation

Place the file `shaw` in the XKB symbols directory - likely `/usr/share/X11/xkb/symbols/shaw`. This allows you to switch to the keyboard layout with the CLI: `setxkbmap shaw -option compose:ralt` or `setxkbmap shaw -variant dvorak -option compose:ralt`.

Place the file `.XCompose` in your home directory - `~/.XCompose` - or copy its contents to this location if the file already exists. This allows the compose sequences to function.

Copy the contents of `add-to-evdev.xml` to the XKB evdev rules - likely `/usr/share/X11/xkb/rules/evdev.xml` - just before the line containing `</layoutList>`. This allows your desktop environment's GUI keyboard configurator to locate the shavian layouts. If you only use `setxkbmap` this step is not strictly necessary.

Log out. Running processes will not recognize the new compose sequences.

## Learning

Tip: use `feh` to open the layout image in a small window that you can keep on-screen while learning this (or any other) keyboard layout. eg. `feh -x. img/jafl-qwerty.png`

